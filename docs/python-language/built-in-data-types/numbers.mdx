---
sidebar_position: 1
---

import CodeBlock from '@theme/CodeBlock';
import numbers_1 from '!!raw-loader!/static/examples/python-language/built-in-data-types/numbers/numbers_1.py';
import numbers_2 from '!!raw-loader!/static/examples/python-language/built-in-data-types/numbers/numbers_2.py';
import numbers_3 from '!!raw-loader!/static/examples/python-language/built-in-data-types/numbers/numbers_3.py';
import numbers_4 from '!!raw-loader!/static/examples/python-language/built-in-data-types/numbers/numbers_4.py';
import numbers_5 from '!!raw-loader!/static/examples/python-language/built-in-data-types/numbers/numbers_5.py';
import numbers_6 from '!!raw-loader!/static/examples/python-language/built-in-data-types/numbers/numbers_6.py';
import numbers_7 from '!!raw-loader!/static/examples/python-language/built-in-data-types/numbers/numbers_7.py';

# Числа

## Числовые типы. Общая информация {#numeric-types-common-information}

Все числовые типы в Python принадлежат к неизменяемым или, иначе, иммутабельным (от английского «immutable» — «неизменяемый») типам данных.

В Python существует три базовых типа чисел:

- целые числа (*integers*);
- числа с плавающей точкой (*floating point numbers*);
- комплексные числа (*complex numbers*).

Булевы числа являются подтипом целых чисел. Целые числа имеют неограниченную точность. То есть количество байтов, занимаемых целыми числами, ограничивается только оперативной памятью компьютера.

Точность чисел с плавающей точкой соответствует типу `double` языка C и зависит от архитектуры операционной системы и компилятора C, который применялся при сборке Python. Информацию о точности чисел во внутреннем представлении Python можно получить, обратившись к свойству [`sys.float_info`](https://docs.python.org/3/library/sys.html#sys.float_info) стандартной библиотеки.

Комплексные числа имеют действительную и мнимую части, каждая из которых представлена числом с плавающей точкой. Извлечь действительную и мнимую части числа `z` можно, обратившись к свойствам `z.real` и `z.imag`.

Python полностью поддерживает смешанную арифметику трёх базовых числовых типов: перед выполнением операций не нужно специально преобразовывать операнды к нужному типу данных. Когда встречаются операнды разных типов, операнд более «узкого» типа автоматически преобразуется к более «широкому» типу данных. Булевы числа являются более узкими, чем целые числа. Целые числа — более узкие, чем числа с плавающей точкой, а те, в свою очередь, — более узкие, чем комплексные числа. Результат операции будет представлять собой число более широкого типа.

Например, выражение `1 + 2.0` вернёт `3.0`, поскольку `1` (целое число) будет предварительно преобразовано к `1.0` (числу с плавающей точкой), после чего выполнится операция сложения двух чисел с плавающей точкой.

Также операция деления целых чисел всегда возвращает число с плавающей точкой, даже если числа делятся без остатка. Например, выражение `6 / 2` вернёт `3.0`. Это сделано с целью упрощения работы программиста, так как избавляет от лишней проверки типа полученного числа.

Входящий в стандартную библиотеку модуль [`math`](https://docs.python.org/3/library/math.html), включающий в себя доступ к математическим функциям, определённым стандартом языка C, не может работать с комплексными числами. Для работы с комплексными числами нужно использовать модуль [`cmath`](https://docs.python.org/3/library/cmath.html#module-cmath) (сокращение от «complex math»).

Стандартная библиотека включает в себя дополнительные числовые типы:

- рациональные числа ([`fractions.Fraction`](https://docs.python.org/3/library/fractions.html#fractions.Fraction));
- числа с плавающей точкой с фиксированной точностью ([`decimal.Decimal`](https://docs.python.org/3/library/decimal.html#decimal.Decimal)).

Числа типа `decimal.Decimal` позволяют программисту задавать точность и стратегию округления.

## Операции с числами {#operations-with-numeric-types}

### Таблица 1. Операции, поддерживаемые всеми числовыми типами {#table-1-operations-supported-by-all-numeric-types}

| Операция | Название | Результат | Примечания |
| ------- | --------- | --------- | ---------- |
| `x + y` | Сложение | Сумма `x` и `y` | |
| `x - y` | Вычитание | Разность между `x` и `y` | |
| `x * y` | Умножение | Произведение `x` и `y` | |
| `x / y` | Деление | Частное от `x` и `y` | |
| `x // y` | Взятие неполного частного | Неполное частное от деления с остатком `x` на `y` | 1 |
| `x % y` | Взятие остатка | Остаток от деления с остатком `x` на `y` | 2 |
| `-x` | Смена знака (унарный минус) | `x` с противоположным знаком | |
| `+x` | Отсутствие изменений (унарный плюс) | `x` без изменений | 3 |
| `x ** y` | Возведение в степень | `x` в степени `y` | 4 |
| [`abs(x)`](https://docs.python.org/3/library/functions.html#abs) | Абсолютная величина| Абсолютная величина `x` | |
| [`int(x)`](https://docs.python.org/3/library/functions.html#int) | Целое число | `x`, преобразованное к целому числу | 5, 7 |
| [`float(x)`](https://docs.python.org/3/library/functions.html#float) | Число с плавающей точкой | `x`, преобразованное к числу с плавающей точкой | 6, 7 |
| [`complex(re, im)`](https://docs.python.org/3/library/functions.html#complex) | Комплексное число | Комплексное число с действительной частью `re` и мнимой частью `im`. По умолчанию `im` равно нулю | 6, 7 |
| `c.conjugate()` | Сопряжённое число | Сопряжение комплексного числа `c` | |
| [`divmod(x, y)`](https://docs.python.org/3/library/functions.html#divmod) | Неполное частное и остаток от деления| Пара чисел, эквивалентная результату выполнения операции `(x // y, x % y)` | 1, 2 |
| [`pow(x, y)`](https://docs.python.org/3/library/functions.html#pow) | Возведение в степень | `x` в степени `y` | 4 |

### Примечания к таблице 1 {#notes-to-table-1}

1. Также называется целочисленным делением. Результирующее значение — целое число, хотя тип результата не обязательно должен быть `int`. Результат всегда округляется до минус бесконечности: `1//2` равно `0`, `(-1)//2` равно `-1`, `1//(-2)` равно `-1`, `(-1)//(-2)` равно `0`.
2. Не работает с комплексными числами. Если нужно применять эту операцию к комплексным числам, их следует преобразовать в числа с плавающей точкой, используя встроенную функцию `abs()`.
3. Унарный плюс не имеет какого-либо эффекта при работе с числами, за исключением округления чисел типа `decimal.Decimal` (числа с заданной точностью). При операциях с числами типа `decimal.Decimal` операция `+x` округляет числа так, что в общей сложности получаются числа с 28 разрядами вне зависимости т того, сколько разрядов остаётся в дробной части.
4. Результат операции `0 ** 0` и `pow(0, 0)` (встроенная функция возведения в степень) равен `1`, как принято в языках программирования.
5. При преобразовании из числа с плавающей точкой в целое число отбрасывается дробная часть. Например, выражение `int(2.9)` вернёт `2`. Для округления следует пользоваться функцией [`round()`](https://docs.python.org/3/library/functions.html#round). Для округления к большему и меньшему целому числу следует пользоваться функциями [`math.ceil()`](https://docs.python.org/3/library/math.html#math.ceil) и [`math.floor()`](https://docs.python.org/3/library/math.html#math.floor).
6. Функции [`float()`](https://docs.python.org/3/library/functions.html#float) и [`complex(re, im)`](https://docs.python.org/3/library/functions.html#complex) также принимают строки `'nan'` и `'inf'` с возможным префиксом `'+'` или `'-'` для «не числа» («not a number (nan)») и положительной или отрицательной бесконечности («infinity»).
7. Допустимые числовые литералы включают цифры от `0` до `9` или любой эквивалент Юникода (кодовые позиции (от английского «code point» — «кодовая позиция») со свойством **Nd**. Полный список кодовых позиций со свойством **Nd** представлен в документе [DerivedNumericType](https://www.unicode.org/Public/13.0.0/ucd/extracted/DerivedNumericType.txt). О том, что такое кодовые позиции Юникода, написано в подсекции **[Строки](/docs/python-language/built-in-data-types/sequences/strings)**.

### Таблица 2. Операции, поддерживаемые целыми числами и числами с плавающей точкой {#table-2-operations-supported-by-integers-and-floats}

| Операция | Название | Результат |
| -------- | -------- | --------- |
| [`round(x[, n])`](https://docs.python.org/3/library/functions.html#round) | Округление до ближайшего чётного | `x`, округлённое на `n` знаков до ближайшего чётного числа. Если `n` не указано, по умолчанию оно равно `0` |
| [`math.trunc(x)`](https://docs.python.org/3/library/math.html#math.trunc) | Усечение дробной части | `x`, усечённое до целого числа |
| [`math.floor(x)`](https://docs.python.org/3/library/math.html#math.floor) | Округление до меньшего целого | Получение наибольшего целого числа, для которого справедливо выражение `<= x` |
| [`math.ceil(x)`](https://docs.python.org/3/library/math.html#math.ceil) | Округление до большего целого | Получение наименьшего целого числа, для которого справедливо выражение `>= x` |

Для знакомства с дополнительными операциями над числами можно почитать документацию по модулям [`math`](https://docs.python.org/3/library/math.html#module-math) и [`cmath`](https://docs.python.org/3/library/cmath.html#module-cmath).

### Таблица 3. Побитовые операции над целыми числами {#table-3-bitwise-operations-on-integers}

| Операция                | Название                            | Результат                                | Примечания |
| ----------------------- | ----------------------------------- | ---------------------------------------- | ---------- |
| <code>x &#124; y</code> | Побитовое ИЛИ                       | Побитовое ИЛИ of `x` and `y`             | 4          |
| `x ^ y`                 | Побитовое исключающее ИЛИ           | Побитовое исключающее ИЛИ of `x` and `y` | 4          |
| `x & y`                 | Побитовое И                         | Побитовое И of `x` and `y`               | 4          |
| `x << n`                | Арифметический битовый сдвиг влево  | `x` сдвинутое влево на `n` бит           | 1, 2       |
| `x >> n`                | Арифметический битовый сдвиг вправо | `x` сдвинутое вправо на `n` бит          | 1, 3       |
| `~x`                    | Побитовое НЕ                        | Инвертированные биты от `x`              | 5          |

### Примечания к таблице 3 {#notes-to-table-3}

1. Отрицательный сдвиг недопустим и возбуждает ошибку типа `ValueError`.
2. Арифметический битовый сдвиг влево на `n` бит эквивалентен умножению на `2` в степени `n`, то есть результат операции `x << n` равен выражению `x * (2 ** n)`.
3. Арифметический битовый сдвиг вправо на `n` эквивалентен взятию неполного частного от `2` в степени `n`, то есть результат операции `x >> n` равен выражению `x // (2 ** n)`.
4. Операция выполняет действие, соответствующее логической операции из булевой алгебры с этим же названием, но применяется к каждой паре битов, стоящих на одинаковых позициях в двоичных представлениях операндов.
5. Действие этой операции эквивалентно смене знака, применённой к выражению `x + 1`, то есть результат операции `~x` равен выражению `-(x+1)`.

## Целые числа {#integers}

Целые числа в Python могут быть заданы через литерал или через встроенную функцию `int()`, которую можно вызвать без аргументов, с одним аргументом и с двумя аргументами.

### Таблица 4. Литералы целых чисел {#table-4-integer-literals}

| Литерал           | Описание                                                                          |
| ----------------- | --------------------------------------------------------------------------------- |
| `2147483647`      | Целое число в десятичной системе счисления                                        |
| `100_000_000_000` | Целое число в десятичной системе счисления: запись со знаком подчёркивания        |
| `0b100110111`     | Целое число в восьмеричной системе счисления                                      |
| `0b_1110_0101`    | Целое число в двоичной системе счисления: запись со знаком подчёркивания          |
| `0o177`           | Целое число в восьмеричной системе счисления                                      |
| `0o_377`          | Целое число в восьмеричной системе счисления: запись со знаком подчёркивания      |
| `0xdeadbeef`      | Целое число в шестнадцатеричной системе счисления                                 |
| `0x_7fffffff`     | Целое число в шестнадцатеричной системе счисления: запись со знаком подчёркивания |

### `class int([x])` {#class-int-x}
### `class int(x, base=10)` {#class-int-x-base-10}

Функция-[конструктор](https://ru.wikipedia.org/wiki/Конструктор_(объектно-ориентированное_программирование)) `int()`, вызванная без аргументов, возвращает ссылку на объект целого числа `0`.

Функция `int()`, вызванная с одним аргументом, возвращает ссылку на объект целого числа. В этом случае в качестве аргумента может быть число любого типа, включая `decimal.Decimal` и `fractions.Fraction`, кроме `complex`. На основании комплексных чисел нельзя инициализировать целые числа, но можно инициализировать целое число на основании действительной или мнимой части комплексного числа, поскольку они принадлежат к типу `float`.

Если в функцию `int()` передано не целое число, дробная часть полученного целого числа усекается.

Если функция `int()`, вызывается с двумя аргументами, первым аргументом должна быть строка, объект `bytes` или объект `bytearray`. Второй аргумент, который называется `base`, целое число, которое должно быть целым числом и должно быть равное нулю или быть между 2 и 36 включительно (то есть соответствовать выражению `base == 0 or 2 <= base <= 36`). Аргумент `base` задаёт основание системы счисления, в которой должна быть распознана строка, переданная первым аргументом. Если аргумент `base` равен нулю, функция `int()` пытается определить систему счисления по первому аргументу, заданному строкой. Если аргумент `base` задан целым числом между 2 и 36 включительно, функция `int()` пытается создать объект, интерпретировав строку в заданной системе счисления. На практике используются двоичная, восьмеричная, десятичная и шестнадцатеричная системы счисления.

При объявлении целого числа через литерал для наглядного разграничения разрядов допускается использование символа подчёркивания `_`. Запись более одного символа подчёркивания подряд не допускается.

Не допускаются ведущие нули в литералах целых чисел. Например, выражение `a = 7` — корректно, а выражения `a = 07` или `a = 007` — некорректны, потому что начинаются с нулей. Попытка вызова инструкций, содержащих литералы целых чисел с ведущими нулями, возбудит исключение типа `SyntaxError` (синтаксическая ошибка) на этапе разбора кода, и программа не будет выполнена.

## Дополнительные методы целых чисел {#additional-integer-methods}

### `int.bit_length()` {#int-bit-length}

Возвращает количество битов, необходимых для представления целого числа в двоичном формате, исключая знак и ведущие нули.

```python showLineNumbers
>>> n = -37
>>> bin(n)
'-0b100101'
>>> n.bit_length()
6
```
Результат вызова этого метода эквивалентен результату вызова следующей функции:

```python showLineNumbers
def bit_length(self):
    s = bin(self)       # двоичное представление:  bin(-37) --> '-0b100101'
    s = s.lstrip('-0b') # удаление ведущих нулей и знака минус
    return len(s)       # len('100101') --> 6
```

### `int.bit_count()` {#int-bit-count}

Возвращает количество единиц (количество вхождений цифры `1`) в двоичном представлении абсолютного значения целого числа.

```python showLineNumbers
>>> n = 19
>>> bin(n)
'0b10011'
>>> n.bit_count()
3
>>> (-n).bit_count()
3
```

Результат вызова этого метода эквивалентен результату вызова следующей функции:

```python showLineNumbers
def bit_count(self):
    return bin(self).count("1")
```

### `int.to_bytes(length, byteorder, *, signed=False)` {#int-to-bytes-length-byteorder-asterisk-signed-alse}

Возвращает массив байтов, представляющий заданное целое число.

```python showLineNumbers
>>> (1024).to_bytes(2, byteorder='big')
b'\x04\x00'
>>> (1024).to_bytes(10, byteorder='big')
b'\x00\x00\x00\x00\x00\x00\x00\x00\x04\x00'
>>> (-1024).to_bytes(10, byteorder='big', signed=True)
b'\xff\xff\xff\xff\xff\xff\xff\xff\xfc\x00'
>>> x = 1000
>>> x.to_bytes((x.bit_length() + 7) // 8, byteorder='little')
b'\xe8\x03'
```

### `classmethod int.from_bytes(bytes, byteorder, *, signed=False)` {#classmethod-int-from-bytes-bytes-byteorder-asterisk-signed-false}

Метод класса. Возвращает целое число, представленное заданным массивом байтов в заданном порядке.

```python showLineNumbers
>>> int.from_bytes(b'\x00\x10', byteorder='big')
16
>>> int.from_bytes(b'\x00\x10', byteorder='little')
4096
>>> int.from_bytes(b'\xfc\x00', byteorder='big', signed=True)
-1024
>>> int.from_bytes(b'\xfc\x00', byteorder='big', signed=False)
64512
>>> int.from_bytes([255, 0, 0], byteorder='big')
16711680
```

### `int.as_integer_ratio()` {#int-as-integer-ratio}

Возвращает пару целых чисел (числитель и знаменатель с положительным знаком), отношение которых равно исходному числу с плавающей точкой. Отношение целых чисел всегда представляет собой исходное целое число в числителе и `1` в знаменателе.

```python showLineNumbers
>>> (15).as_integer_ratio()
(15, 1)
>>> (-20).as_integer_ratio()
(-20, 1)
>>> (0).as_integer_ratio()
(0, 1)
```

<CodeBlock language="python" title="numbers_1.py" showLineNumbers>{numbers_1}</CodeBlock>

В примере 1 продемонстрированы способы инициализации объектов целых чисел.

На строках 3 и 4 в программу импортируются модули `decimal` и `fractions` стандартной библиотеки. Они будут использоваться на строках 50 и 56 для инициализации объектов чисел, относящихся к типам `decimal.Decimal` и `fractions.Fraction`. Согласно привалам оформления кода Python, инструкции `import` записываются в начале файла. Импорт каждого модуля записывается отдельной строкой. Интерпретатор допускает импорт модулей в любой части программы и указание модулей через запятую в одной инструкции `import`, но эта форма записи не принята, так как считается, что она затрудняет чтение программы программистом.

На строке 6 приводится пример объявления объекта типа `int` с использованием литерала десятичного целого числа с символами подчёркивания для наглядного разграничения разрядов.

:::info внимание

При выводе числа на строке 7 символы подчёркивания не выводятся. Они используются только в литералах.

:::

На строке 9 приведён пример неправильной записи литерала числа с двумя символами подчёркивания подряд. Если раскомментировать эту строку и запустить программу, на этапе разбора кода будет возбуждено исключение типа `SyntaxError`, и ни одна инструкция программы не будет выполнена.

На строке 10 приведён пример неправильной записи литерала числа с ведущим нулём.

На строке 12 приводится пример инициализации целого числа с использованием литерала числа в шестнадцатеричной системе счисления. На это указывает префикс `0x`.

На строке 15 объект целого числа инициализируется через вызов встроенной функции `int()` без аргументов. Функция `int()` в этом случае возвращает объект `0`.

На строке 18 целое число создаётся через вызов функции `int()` с одним аргументом: в функцию передаётся ссылка на константу `True`. Функция возвращает `1`.

На строке 21 целое число создаётся через вызов функции `int()`, в которую передаётся объект типа `float`, созданный через литерал числа с плавающей точкой. Функция `int()`, принимая ссылку на число с плавающей точкой, возвращает ссылку на целочисленный объект, полученный усечением дробной части исходного объекта.

:::info внимание

В функцию передаётся не литерал, а объект типа `float`, инициализированный (созданный в оперативной памяти) на основании этого литерала.

:::

На строке 24 с переменной `b` связывается комплексное число с ненулевой действительной частью, заданное выражением `3+10j` (целое число `3` прибавляется к комплексному числу `10j`).
На строке 25 показан пример попытки создания объекта целого числа на основании комплексного числа через вызов функции `int()`. Попытка выполнить эту инструкцию приведёт к исключению типа `TypeError`, так как невозможно получить целое число на основе комплексного числа. Если раскомментировать строку 25 и запустить программу, интерпретатор выполнит программу до строки 24 и прекратит выполнение после возбуждения исключения.

Однако можно через вызовы функции `int()` получить целые числа на основании действительной и мнимой частей комплексного числа, что показано на строках 26 и 28, поскольку действительная и мнимая части комплексных чисел — это числа типа `float`, и функция `int()` может их обрабатывать.

На строке 31 показана инициализация целого числа на основании объекта типа `str` (строка). Функция `int()` умеет распознавать число из последовательности символов строки.

:::info внимание

Первый символ передаваемой фв функцию строки — `0`. Функция `int()` автоматически отбрасывает ведущий ноль при распознавании числа на основании строки.

:::

Вызов функции `int('0128', 10)` на строке 34 эквивалентен вызову `int('0128')` на строке 31. Функция `int()` имеет второй необязательный именованный аргумент `base`, означающий основание системы счисления объекта, переданного первым аргументом. По умолчанию `base` равно `10`, то есть предполагается, что в функцию `int()` передаётся объект, представляющий число в десятичной системе счисления.

Как было написано выше, аргумент `base` должен быть целым числом и должен быть равен нулю или быть между 2 и 36 включительно (то есть соответствовать выражению `base == 0 or 2 <= base <= 36`). Если аргумент `base` равен нулю, функция `int()` пытается определить систему счисления по первому аргументу, заданному строкой.

На строке 37 функция `int()` автоматически распознаёт строку как десятичное число, аргумент `base` равен нулю.

На строке 40 показано, как в выражении `int('0128', 0)` функция `int()` не может автоматически распознать строку `'0128'` при `base`, равном `0`, в то время как при явном указании десятичной системы счисления в выражении `int('0128', 10)` на строке 34 функция `int()` успешно преобразует строку с ведущим нулём в целое число.

На строке 42 функция `int()` с аргументом `base=0` автоматически распознаёт строку `'0x989680'` как целое число в шестнадцатеричной системе счисления благодаря префиксу `0x`.

На строке 45 функция `int()` распознаёт строку `'989680'` без префикса `0x` как целое число в шестнадцатеричной системе счисления благодаря явному указанию основания системы счисления в аргументе `base=16`.

На строке 48 продемонстрирована попытка преобразования строки `'0x989680'` с шестнадцатеричным префиксом `0x`. Запуск этой инструкции возбудит исключение типа `ValueError`, поскольку в выражении `int('0x989680')` не указан аргумент `base`, и функция `int()` пытается распознать строку как десятичное число, поскольку по умолчанию `base=10`.

На строке 50 инициализируется число типа `decimal.Decimal`. На строке 53 число типа `decimal.Decimal` преобразуется в целое число путём усечения дробной части.

На строке 56 инициализируется число типа `fractions.Fraction`, предоставляющего механизм точного представления простых дробей. На строке 58 показано, что дробь `10/6` была автоматически сокращена до дроби `5/3`. На строке 59 вызов функции `int()` возвращает ссылку на объект целого числа `1`, которое вычисляется путём целочисленного деления числителя `5` на знаменатель `3`.

## Целые числа. Преобразования между системами счисления. Функции `bin()`, `oct()` и `hex()` {#integer-numbers-conversions-between-number-systems-bin-oct-hex-functions}

Во внутреннем представлении компьютер хранит числа в двоичной системе счисления. Поскольку форма записи в двоичной системе счисления слишком длинная и неудобная для восприятия человеком, приобрели популярность системы счисления с основаниями, являющимися степенями числа 2. Это восьмеричная (2<sup>3</sup>) и шестнадцатеричная (2<sup>4</sup>) системы счисления. [Восьмеричная](https://ru.wikipedia.org/wiki/Восьмеричная_система_счисления) и [шестнадцатеричная](https://ru.wikipedia.org/wiki/Шестнадцатеричная_система_счисления) системы счисления представляют более короткую форму записи чисел по сравнению с двоичной системой счисления.

Функции `bin()`, `oct()` и `hex()` преобразуют целые числа в строки, представляющие числа в соответствующих системах счисления. Если попытаться передать в функцию ссылку на объект, не являющийся целым числом, будет возбуждено исключение типа TypeError (ошибка типа).

Функции `bin()`, `oct()` и `hex()` могут пригодиться при взаимодействии с кодом на языке C, например, если программист пишет библиотеку на C и делает обёртку (wrapper) для работы с этой библиотекой из Python. В большинстве задач напрямую взаимодействовать с кодом на С средствами Python не требуется — взаимодействие осуществляется опосредованно через обращение к готовым библиотекам, написанным на C.

### Таблица 5. Функции преобразования целых чисел между системами счисления {#table-5-functions-for-converting-integers-between-number-systems}

| Функция | Описание | Пример |
| ------- | -------- | ------ |
|[`bin(x)`](https://docs.python.org/3/library/functions.html#bin) | Преобразование целого числа к строке, представляющей число в двоичной системе счисления с префиксом `'0b'` | `>>> bin(25)`<br />`'0b11001'` |
|[`oct(x)`](https://docs.python.org/3/library/functions.html#oct) | Преобразование целого числа к строке, представляющей число в восьмеричной системе счисления с префиксом `'0o'` | `>>> oct(25)`<br />`'0o31'` |
|[`hex(x)`](https://docs.python.org/3/library/functions.html#hex) | Преобразование целого числа к строке, представляющей число в шестнадцатеричной системе счисления с префиксом `'0x'` | `>>> hex(25)`<br />`'0x19'` |
|[`int(x, base=10)`](https://docs.python.org/3/library/functions.html#int) | Преобразование целого числа, объекта `bytes`, `bytearray` или строки к целому числу с указанием основания системы счисления | `>>> int(25.5)`<br />`25`<br />`>>> int('0b11001', 2)`<br />`25`<br />`>>> int('0o31', 8)`<br />`25`<br />`int('0x19', 16)`<br />`25` |

<CodeBlock language="python" title="numbers_2.py" showLineNumbers>{numbers_2}</CodeBlock>

В примере 2 показан вызов функций `bin()`, `oct()` и `hex()`.

:::info внимание

На строке 3 объявлено целое число `-512` через литерал в десятичной системе счисления, а на строке 12 объявлено это же число через литерал в двоичной системе счисления. В обоих случаях функции выдают одинаковый результат, поскольку во внутреннем представлении интерпретатора Python это одно и то же число, и не имеет никакого значения, каким способом оно объявлено.

:::

## Целые числа. Побитовые операции {#integers-bitwise-operations}

В примере 3 приведены результаты [побитовых операций](https://ru.wikipedia.org/wiki/Битовая_операция) над числами `1` и `2`.

<CodeBlock language="python" title="numbers_3.py" showLineNumbers>{numbers_3}</CodeBlock>

## Числа с плавающей точкой {#floating-point-numbers}

Числа с плавающей точкой можно объявить через литерал или через встроенную функцию `float()`, которую можно вызвать без аргументов или с одним аргументом. Аргумент может быть числом или строкой, содержащей представление числа **в десятичной системе счисления**.

В отличие от литералов целых чисел, в литералах чисел с плавающей точкой допускаются ведущие нули. Например, корректны такие выражения, как `a = 07.07` или `a = 007.007`. Также число с нулевой целой частью можно записать с ведущей точкой. Например: корректно выражение `a = .7`.

### Таблица 6. Литералы чисел с плавающей точкой {#table-6-floating-point-literals}

| Литерал      | Описание                                                                                |
| ------------ | --------------------------------------------------------------------------------------- |
| `3.14`       | Число с плавающей точкой в десятичной системе счисления                                 |
| `10.`        | Число с плавающей точкой в десятичной системе счисления: запись с завершающей точкой    |
| `.001`       | Число с плавающей точкой в десятичной системе счисления: запись с ведущей точкой        |
| `1e100`      | Число с плавающей точкой в десятичной системе счисления: экспоненциальная запись        |
| `3.14e-10`   | Число с плавающей точкой в десятичной системе счисления: экспоненциальная запись        |
| `0e0`        | Число с плавающей точкой в десятичной системе счисления: экспоненциальная запись        |
| `3.14_15_93` | Число с плавающей точкой в десятичной системе счисления: запись со знаком подчёркивания |

### `class float([x])` {#class-float-x}

Функция-[конструктор](https://ru.wikipedia.org/wiki/Конструктор_(объектно-ориентированное_программирование)) `float()`, вызванная без аргументов, возвращает ссылку на объект числа с плавающей точкой `0.0`.

Функция `float()`, вызванная с аргументом, возвращает ссылку на объект числа с плавающей точкой. В этом случае в качестве аргумента может быть число любого типа, включая `decimal.Decimal` и `fractions.Fraction`, кроме `complex`. На основании комплексных чисел нельзя инициализировать числа с плавающей точкой, но действительная и мнимая части комплексного числа сами принадлежат к типу `float`.

Если в функцию `float()` передано целое число, дробная часть полученного числа с плавающей точкой становится равной `0`.

Если в функцию `float()` передана строка, она должна содержать представление числа **в десятичной системе счисления**.

## Дополнительные методы чисел с плавающей точкой {#additional-floating-point-methods}

### `float.as_integer_ratio()` {#float-as-integer-ratio}

Возвращает пару целых чисел (числитель и знаменатель с положительным знаком), отношение которых равно исходному числу с плавающей точкой. Вызывает исключение типа `OverflowError` для положительной и отрицательной бесконечностей и исключение типа `ValueError` для `NaN`.

```python showLineNumbers
>>> (15.5).as_integer_ratio()
(31, 2)
>>> (20.0).as_integer_ratio()
(20, 1)
>>> (25.25).as_integer_ratio()
(101, 4)
>>> (-100.001).as_integer_ratio()
(-3518472393255289, 35184372088832)
```

### `float.is_integer()` {#float-is-integer}

Возвращает `True`, если число с плавающей точкой имеет дробную часть, равную `0`. В противном случае возвращает `False`.

```python showLineNumbers
>>> (-2.0).is_integer()
True
>>> (3.2).is_integer()
False
```

### `float.hex()` {#float-hex}

Возвращает представление числа с плавающей точкой в виде шестнадцатеричной строки.

```python showLineNumbers
>>> (21.5).hex()
'0x1.5800000000000p+4'
>>> (-15.25).hex()
'-0x1.e800000000000p+3'
>>> (0.0).hex()
'0x0.0p+0'
```

### `classmethod float.fromhex(s)` {#classmethod-float-fromhex}

Метод класса. Возвращает число с плавающей точкой, созанное на основе шестнадцатеричной строки `s`. Строка `s` может иметь начальные и конечные пробелы.

```python showLineNumbers
>>> float.fromhex('0x1.5800000000000p+4')
21.5
>>> float.fromhex('-0x1.e800000000000p+3')
-15.25
>>> float.fromhex('0x0.0p+0')
0.0
```

<CodeBlock language="python" title="numbers_4.py" showLineNumbers>{numbers_4}</CodeBlock>

В примере 4 на строках 3 и 4 в программу импортируются модули `decimal` и `fractions` стандартной библиотеки. Они будут использоваться на строках 34 и 40 для инициализации объектов чисел, относящихся к типам `decimal.Decimal` и `fractions.Fraction`.

На строке 6 число с плавающей точкой объявляется через литерал с ведущей точкой. Такая форма записи означает, что целая часть числа равна нулю.

На строке 9 с плавающей точкой объявляется через литерал с ведущим нулём и символами подчёркивания, используемыми для наглядного разграничения разрядов.

На строке 12 число с плавающей точкой объявляется через вызов функции `float()` без аргументов. В этом случае функция `float()` возвращает `0.0`.

На строке 15 число с плавающей точкой инициализируется на основе булева числа `True`. Функция `float()` возвращает `1.0`.

На строке 18 через объявлено комплексное число `3+10j`.

На строке 19 показана попытка инициализировать число с плавающей точкой на основе комплексного числа. Если раскомментировать и выполнить эту инструкцию, будет возбуждено исключение типа `TypeError` (ошибка типа).

На строках 20 и 22 показано, что действительная и мнимая части комплексного числа сами относятся к типу `float`.

На строке 25 приведён пример получения числа с плавающей точкой на основе строки, содержащей представление числа в десятичной системе счисления.

:::info внимание

Строка начинается с пробела.  Функция `float()` выполняет очистку строк от пробелов в процессе распознать число, представленное строкой.

:::

На строках 28 и 40 показаны примеры создания чисел с плавающей точкой на основании строк `'-InFiNiTy'` и `' nan '`. Функция `float()` распознаёт строки `inf`, `infinity` и `nan` независимо от регистра букв и наличия ведущих и завершающих пробелов.

На строках с 31 по 38 показаны примеры операций с бесконечностью. Арифметические операции с числами, где одним из операндов является бесконечность, возвращают бесконечность с соответствующим знаком. Сложение и умножение бесконечности возвращает бесконечность с соответствующим знаком, вычитание и деление бесконечности на бесконечность возвращают `nan`.

На строках с 43 по 50 показаны примеры арифметических операций с `nan`. Все операции, где одним из операндов является `nan`, возвращают `nan`.

На строке 54 инициализируется число с плавающей точкой на основании числа типа `decimal.Decimal`.

На строке 59 инициализируется число с плавающей точкой на основании числа типа `fractions.Fraction`. Число с плавающей точкой получено путём деления числителя простой дроби на знаменатель.

## Числа с плавающей точкой. Накопление погрешности {#floating-point-numbers-accumulation-of-error}

При работе с числами с плавающей точкой следует учитывать особенности машинной арифметики: двоичное представление чисел во внутреннем представлении компьютера приводит к накоплению погрешности, связанной с переводом чисел с плавающей точкой из десятичной системы счисления в двоичную. Пример 4 иллюстрирует этот факт. Более подробную информацию можно получить в официальной документации Python: [Floating Point Arithmetic: Issues and Limitations](https://docs.python.org/3/tutorial/floatingpoint.html#tut-fp-issues).

<CodeBlock language="python" title="numbers_5.py" showLineNumbers>{numbers_5}</CodeBlock>

В примере 5 на строке 4 вместо ожидаемого `0.3` интерпретатор выведет `0.30000000000000004`. На строках 7 вместо ожидаемого нуля интерпретатор выведет `5.551115123125783e-17` — число, приближенное к нулю, записанное в экспоненциальном формате для удобства представления. Если мы захотим вывести это число в виде десятичной дроби без использования экспоненциального представления, можно воспользоваться встроенной функцией [`format()`](https://docs.python.org/3/library/functions.html#format), позволяющей задавать правила оформления строковых представлений объектов.

## Числа с плавающей точкой. Округление. Функция `round()` и методы `math.trunc()`, `math.floor()` и `math.ceil()` {#floating-point-numbers-rounding-round-math-trunc-math-floor-math-ceil-functions}

В Python есть два способа преобразовать число с плавающей точкой к целому числу: функция `int()` и метод `math.trunc()`. Оба способа урезают дробную часть и возвращают целое число.

В Python есть три способа округления чисел с плавающей точкой: встроенная функция `round()` и методы `math.floor()` и `math.ceil()`.

Функция `round()` позволяет округлять числа с плавающей точкой как до целых чисел, так и до чисел с плавающей точкой с нужным количеством знаков после точки.

Метод `math.floor()` округляет число с плавающей точкой до ближайшего меньшего целого.

Метод `math.ceil()` округляет число с плавающей точкой до ближайшего большего целого.

:::info внимание

Есть особый случай округления до целых чисел, когда округляются числа с плавающей точкой, у которых после точки один знак, представленный цифрой `5`. Это такие числа, как `0.5`, `1.5`, `2.5`, `3.5` и так далее. Эти числа одинаково близки и к ближайшему меньшему, и к ближайшему большему целым числам.

:::

В этом случае в Python 3 функция `round()` использует так называемое «округление банкира» — округление до ближайшего чётного числа. В Python 2 тип округляемого числа не менялся, и исходное число округлялось до большего по модулю числа с плавающей точкой с нулём после точки. В Python 3 реализован новый алгоритм округления («округление банкира»), чтобы уменьшить статистическую погрешность, которая накапливается при округлении большого количества однотипных данных способом математического округления до большего по модулю целого. Более подробно про различные виды округления моно почитать на [Википедии](https://ru.wikipedia.org/wiki/Округление).

Ниже приведены для сравнения различные стратегии округления чисел типа `0.5` в интерпретируемых языках программирования.

#### Функция `round()` в Python 3: округление чисел типа `0.5` до ближайшего чётного целого (округление банкира)

```python showLineNumbers
>>> round(2.5)
2
>>> round(3.5)
4
>>> round(-2.5)
-2
>>> round(-3.5)
-4
```

#### Функция `round()` в Python 2: округление чисел типа `0.5` до ближайшего большего по модулю числа с плавающей точкой с нулём после точки

```python showLineNumbers
>>> round(2.5)
3.0
>>> round(3.5)
4.0
>>> round(-2.5)
-3.0
>>> round(-3.5)
-4.0
```

#### Функция `round()` в PHP: округление чисел типа `0.5` до ближайшего большего по модулю целого (математическое округление)

```php showLineNumbers
php > print round(2.5);
3
php > print round(3.5);
4
php > print round(-2.5);
-3
php > print round(-3.5);
-4
```

#### Метод `Float.round()` в Ruby: округление чисел типа `0.5` до ближайшего большего по модулю целого (математическое округление)

```ruby showLineNumbers
irb(main):001:0> 2.5.round()
=> 3
irb(main):002:0> 3.5.round()
=> 4
irb(main):003:0> -2.5.round()
=> -3
irb(main):004:0> -3.5.round()
=> -4
```

#### Метод `Math.round()` в JavaScript: округление чисел типа `0.5` до ближайшего большего целого (без учёта модуля)

```javascript showLineNumbers
> Math.round(2.5)
3
> Math.round(3.5)
4
> Math.round(-2.5)
-2
> Math.round(-3.5)
-3
```

В примере 6 продемонстрированы способы округления положительных и отрицательных чисел с плавающей точкой.

<CodeBlock language="python" title="numbers_6.py" showLineNumbers>{numbers_6}</CodeBlock>

На строках 7 и 14 выполняется округление функцией `round()` до целых чисел.

На строках 8 и 15 выполняется округление функцией `round()` до чисел с плавающей точкой с двумя знаками после точки. Второй аргумент яункции `round()` задаёт количество знаков после точки.

:::info внимание

Округление числа `2.675` до числа с двумя знаками после точки возвращает `2.67` вместо ожидаемого `2.68`. Это связано с особенностями машинной арифметики при вычислении чисел с плавающей точкой. Более подробную информацию можно получить в официальной документации Python: [Floating Point Arithmetic: Issues and Limitations](https://docs.python.org/3/tutorial/floatingpoint.html#tut-fp-issues).

:::

На строках 9 и 16 выполняется усечение дробных частей методом `math.trunc()`. Результат вызова этого метода эквивалентен результату вызова функции `int()`.

На строках 10 и 17 выполняется округление до ближайшего меньшего целого числа методом `math.floor()`.

На строках 11 и 18 выполняется округление до ближайшего большего целого числа методом `math.ceil()`.

На строке 21 объявлена пользовательская функция `round_half_up()`, реализующая в Python округление до ближайшего большего по модулю целого (математическое округление). Для этого используется возможность типа данных `decimal.Decimal` применять стратегию `decimal.ROUND_HALF_UP`. На строке 23 число с плавающей точкой преобразуется в число типа `decimal.Decimal` (инструкция `decimal.Decimal(number)`), затем вызывается метод `to_integral_value()`, округляющий число со стратегией `decimal.ROUND_HALF_UP`. Результат округления преобразуется к целому числу через вызов функции `int()` и возвращается во внешнюю программу.

На строках с 26 по 29 числа `2.5`, `3.5`, `-2.5`, `-3.5` округляются функцией `round_half_up()`.

## Комплексные числа {#complex-numbers}

Комплексные числа можно объявить через литерал или через встроенную функцию `complex()`, которую можно вызвать без аргументов, с одним аргументом и с двумя аргументами.

### Таблица 7. Литералы комплексных чисел {#table-7-complex-number-literals}

| Литерал       | Описание                                                                         |
| ------------- | -------------------------------------------------------------------------------- |
| `3.14j`       | Комплексное число в десятичной системе счисления                                 |
| `10.j`        | Комплексное число в десятичной системе счисления: запись с завершающей точкой    |
| `10j`         | Комплексное число в десятичной системе счисления                                 |
| `.001j`       | Комплексное число в десятичной системе счисления: запись с ведущей точкой        |
| `1e100j`      | Комплексное число в десятичной системе счисления: экспоненциальная запись        |
| `3.14e-10j`   | Комплексное число в десятичной системе счисления: экспоненциальная запись        |
| `3.14_15_93j` | Комплексное число в десятичной системе счисления: запись со знаком подчёркивания |

### `class complex([real[, imag]])` {#class-complex-real-imag}

Комплексное число состоит из действительной и мнимой частей. Действительная и мнимая части — числа с плавающей точкой. Литерал мнимой части включает в себя завершающий символ `j`. При объявлении комплексного числа можно задать только мнимую часть, тогда действительная часть будет равна `0.0`. Действительная часть комплексного числа `a` доступна через обращение к свойству `a.real`, мнимая часть — через обращение к свойству `a.imag`.

Чтобы объявить комплексное число с ненулевой действительной частью, нужно прибавить целое число или число с плавающей точкой к комплексному числу с нулевой действительной частью. При такой форме записи не принято ставить пробел между литералами чисел.

Функция `complex()`, вызванная без аргументов, возвращает ссылку на объект комплексного числа `0j`.

Функция `complex()`, вызванная с одним аргументом (действительная часть), возвращает ссылку на объект комплексного числа с нулевой мнимой частью. В этом случае в качестве аргумента может быть число любого типа, включая `decimal.Decimal`, `fractions.Fraction` и `complex`, либо строка, содержащая представление числа **в десятичной системе счисления**.

Если функция `complex()`, вызывается с двумя аргументами (действительная и мнимая части), оба аргумента должны быть числами любого типа, но ни один аргумент не может быть строкой.

<CodeBlock language="python" title="numbers_7.py" showLineNumbers>{numbers_7}</CodeBlock>

В примере 7 на строке 3 объявляем переменную `a`, ссылающуюся на объект комплексного числа, заданного литералом `10j`. На строке 4 выводим значение объекта, связанного с переменной `a`. На строке 5 выводим тип числа, связанного с переменной `a`. На строках 6 и 7 выводим действительную и мнимую части объекта, связанного с переменной `a`. На строках 8 и 9 выводим типы действительной и мнимой частей объекта, связанного с переменной `a`.

:::info внимание

Несмотря на то, что мы не задали действительную часть и задали мнимую часть литералом целого числа, обе части комплексного числа `a` — и действительная, и мнимая — являются числами с плавающей точкой.

:::

На строке 11 объявляем переменную `b` и связываем с комплексным числом `(3+10j)` с ненулевой действительной частью, полученным путём сложения целого числа `3` с комплексным числом `10j`. На строках 13 и 14 выводим действительную и мнимую части объекта, связанного с переменной `b`.

На строке 16 выводим результат сложения `a + b`. Интерпретатор складывает действительную часть с действительной и мнимую часть с мнимой.

К объекту комплексного числа, инициализированному с помощью литерала или выражения (сложение чисел), можно обращаться, не связывая этот объект с переменной. Для этого нужно заключить выражение, создающее объект, в круглые скобки.

На строках 18 и 19 показан способ обращения к свойствам комплексного числа, инициализированного путём сложения целого числа `3` и комплексного числа `10j`. Выражение, создающее объект, заключено в круглые скобки, точка и название метода записаны сразу после выражения.

На строках 21 и 22 показан неверный способ обращения к свойствам комплексного числа. Сравните вывод на строках 18 и 19 с выводом на строках 21 и 22. Если обратиться к объекту комплексного числа, объявленного через операцию сложения, не заключая выражение в скобки, ошибки не произойдёт, но мы получим неверный результат. При обращении к действительной части интерпретатор вернёт первое слагаемое, а при обращении к мнимой части интерпретатор сложит два числа так, как будто они оба являются мнимыми частями.

На строке 24 показана инициализация комплексного числа `0j` через вызов функции `complex()` без аргументов.

На строках 27 и 30 приведены примеры вызова функции `complex()` с одним аргументом (действительная часть) и двумя аргументами (действительная и мнимая части).

На строке 33 приведён пример создания комплексного числа с нулевой мнимой частью путём автоматического распознавания строки, переданной в функцию `complex()` в качестве первого аргумента.

:::info внимание

Функция `complex()` может распознать строку с ведущим нулём, и что строка представляет собой представление числа в **десятичной** системе счисления.

:::

На строке 36 продемонстрирована попытка передать в функцию `complex()` строку, содержащую число в двоичной системе счисления с префиксом `0b`. Если раскомментировать и запустить эту инструкцию, интерпретатор возбудит исключительное событие типа `ValueError` (ошибка значения).

На строке 37 представлена попытка вызвать функцию `complex()`, передав первым аргументом строку, а вторым — число. Такая попытка возбудит исключение типа `TypeError` (ошибка типа), так если первый аргумент функции `complex()` — строка, второго аргумента быть не должно.

На строке 39 показан пример создания комплексного числа на основании двух комплексных чисел.

На строке 43 показан пример попытки изменить свойство, доступное только для чтения.

## Дополнительные ссылки {#additional-links}

- [Тип данных](https://ru.wikipedia.org/wiki/Тип_данных)
- [Система типов](https://ru.wikipedia.org/wiki/Система_типов)
- [Утиная типизация](https://ru.wikipedia.org/wiki/Утиная_типизация)
- [Статическая типизация](https://ru.wikipedia.org/wiki/Статическая_типизация)
- [Динамическая типизация](https://ru.wikipedia.org/wiki/Динамическая_типизация)
- [Сильная и слабая типизация](https://ru.wikipedia.org/wiki/Сильная_и_слабая_типизация)
- [Неизменяемый объект](https://ru.wikipedia.org/wiki/Неизменяемый_объект)
- [Целое число](https://ru.wikipedia.org/wiki/Целое_число)
- [Число с плавающей запятой](https://ru.wikipedia.org/wiki/Число_с_плавающей_запятой)
- [Число двойной точности](https://ru.wikipedia.org/wiki/Число_двойной_точности)
- [Комплексное число](https://ru.wikipedia.org/wiki/Комплексное_число)
- [Вещественное число](https://ru.wikipedia.org/wiki/Вещественное_число)
- [Мнимая единица](https://ru.wikipedia.org/wiki/Мнимая_единица)
- [Рациональное число](https://ru.wikipedia.org/wiki/Рациональное_число)
- [Сопряжённые числа](https://ru.wikipedia.org/wiki/Сопряжённые_числа)
- [Абсолютная величина](https://ru.wikipedia.org/wiki/Абсолютная_величина)
- [NaN](https://ru.wikipedia.org/wiki/NaN)
- [Бесконечность](https://ru.wikipedia.org/wiki/Бесконечность)
- [Округление](https://ru.wikipedia.org/wiki/Округление)
- [Экспоненциальная запись](https://ru.wikipedia.org/wiki/Экспоненциальная_запись)
- [Двоичная система счисления](https://ru.wikipedia.org/wiki/Двоичная_система_счисления)
- [Восьмеричная система счисления](https://ru.wikipedia.org/wiki/Восьмеричная_система_счисления)
- [Десятичная система счисления](https://ru.wikipedia.org/wiki/Десятичная_система_счисления)
- [Шестнадцатеричная система счисления](https://ru.wikipedia.org/wiki/Шестнадцатеричная_система_счисления)
- [Порядок байтов](https://ru.wikipedia.org/wiki/Порядок_байтов)
- [Конструктор (объектно-ориентированное программирование)](https://ru.wikipedia.org/wiki/Конструктор_(объектно-ориентированное_программирование))
- [Битовая операция](https://ru.wikipedia.org/wiki/Битовая_операция)
